<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>LoadEliminationForLoop</title>
        <link rel="stylesheet" type="text/css" href="../clang-doc-mustache.css"/>
        <script src="../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="../GlobalNamespace/index.html">Global Namespace</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="./index.html">@nonymous_namespace</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>class LoadEliminationForLoop</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#A7CA04331543FD1E6CCECB6089466C92006D6DBC">LoadEliminationForLoop</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#C31723124E737C9151E3D5AD9A645B6DA2758320">findStoreToLoadDependences</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#BBF780FDE42239F250E0A8185F972E8F528EEE74">getInstrIndex</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#26CF8B252290FD9712DC8596302423A4D8C36D1F">removeDependencesFromMultipleStores</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#10486E2BE96C8FDFB2FEB5474388024AD573CD5B">needsChecking</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#2E55624D5DD0E2B19960D38CD01E93EB7B4E2C27">findPointersWrittenOnForwardingPath</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#0357C49994A514D3817673EF4B7795A3BCFE60AE">collectMemchecks</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#0A4383D5251DC4EF1D0C26596B1798EB63B9F42B">propagateStoredValueToLoadUsers</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#02052F4BDE2A53A6A9BCB8ED60DDB9FBA910D87D">processLoop</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">class LoadEliminationForLoop</h1>
                        <p>Defined at line 170 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                        <div class="hero__subtitle">
                            <div>
                                <p> The per-loop class that does most of the work.</p>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="A7CA04331543FD1E6CCECB6089466C92006D6DBC">
                                <pre><code class="language-cpp code-clang-doc">void LoadEliminationForLoop (Loop * L, LoopInfo * LI, const LoopAccessInfo &amp; LAI, DominatorTree * DT, BlockFrequencyInfo * BFI, ProfileSummaryInfo * PSI)</code></pre>
                                <p>Defined at line 172 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="C31723124E737C9151E3D5AD9A645B6DA2758320">
                                <pre><code class="language-cpp code-clang-doc">int findStoreToLoadDependences (const LoopAccessInfo &amp; LAI)</code></pre>
                                <div>
                                    <div>
                                        <p> Look through the loop-carried and loop-independent dependences in</p>
                                        <p> this loop and find store-&gt;load dependences.</p>
                                    </div>
                                    <div>
                                        <p> Note that no candidate is returned if LAA has failed to analyze the loop</p>
                                        <p> (e.g. if it&#39;s not bottom-tested, contains volatile memops, etc.)</p>
                                    </div>
                                </div>
                                <p>Defined at line 182 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="BBF780FDE42239F250E0A8185F972E8F528EEE74">
                                <pre><code class="language-cpp code-clang-doc">unsigned int getInstrIndex (Instruction * Inst)</code></pre>
                                <div>
                                    <div>
                                        <p> Return the index of the instruction according to program order.</p>
                                    </div>
                                </div>
                                <p>Defined at line 243 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="26CF8B252290FD9712DC8596302423A4D8C36D1F">
                                <pre><code class="language-cpp code-clang-doc">void removeDependencesFromMultipleStores (int &amp; Candidates)</code></pre>
                                <div>
                                    <div>
                                        <p> If a load has multiple candidates associated (i.e. different</p>
                                        <p> stores), it means that it could be forwarding from multiple stores</p>
                                        <p> depending on control flow.  Remove these candidates.</p>
                                    </div>
                                    <div>
                                        <p> Here, we rely on LAA to include the relevant loop-independent dependences.</p>
                                        <p> LAA is known to omit these in the very simple case when the read and the</p>
                                        <p> write within an alias set always takes place using the *same* pointer.</p>
                                    </div>
                                    <div>
                                        <p> However, we know that this is not the case here, i.e. we can rely on LAA</p>
                                        <p> to provide us with loop-independent dependences for the cases we&#39;re</p>
                                        <p> interested.  Consider the case for example where a loop-independent</p>
                                        <p> dependece S1-&gt;S2 invalidates the forwarding S3-&gt;S2.</p>
                                    </div>
                                    <div>
                                        <p>         A[i]   = ...   (S1)</p>
                                        <p>         ...    = A[i]  (S2)</p>
                                        <p>         A[i+1] = ...   (S3)</p>
                                    </div>
                                    <div>
                                        <p> LAA will perform dependence analysis here because there are two</p>
                                        <p> *different* pointers involved in the same alias set (</p>
                                        <p>&amp;A</p>
                                        <p>[i] and </p>
                                        <p>&amp;A</p>
                                        <p>[i+1]).</p>
                                    </div>
                                </div>
                                <p>Defined at line 268 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="10486E2BE96C8FDFB2FEB5474388024AD573CD5B">
                                <pre><code class="language-cpp code-clang-doc">bool needsChecking (unsigned int PtrIdx1, unsigned int PtrIdx2, const SmallPtrSetImpl&lt;Value *&gt; &amp; PtrsWrittenOnFwdingPath, const SmallPtrSetImpl&lt;Value *&gt; &amp; CandLoadPtrs)</code></pre>
                                <div>
                                    <div>
                                        <p> Given two pointers operations by their RuntimePointerChecking</p>
                                        <p> indices, return true if they require an alias check.</p>
                                    </div>
                                    <div>
                                        <p> We need a check if one is a pointer for a candidate load and the other is</p>
                                        <p> a pointer for a possibly intervening store.</p>
                                    </div>
                                </div>
                                <p>Defined at line 320 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="2E55624D5DD0E2B19960D38CD01E93EB7B4E2C27">
                                <pre><code class="language-cpp code-clang-doc">SmallPtrSet&lt;Value *, 4&gt; findPointersWrittenOnForwardingPath (const SmallVectorImpl&lt;StoreToLoadForwardingCandidate&gt; &amp; Candidates)</code></pre>
                                <div>
                                    <div>
                                        <p> Return pointers that are possibly written to on the path from a</p>
                                        <p> forwarding store to a load.</p>
                                    </div>
                                    <div>
                                        <p> These pointers need to be alias-checked against the forwarding candidates.</p>
                                    </div>
                                </div>
                                <p>Defined at line 335 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="0357C49994A514D3817673EF4B7795A3BCFE60AE">
                                <pre><code class="language-cpp code-clang-doc">SmallVector collectMemchecks (const SmallVectorImpl&lt;StoreToLoadForwardingCandidate&gt; &amp; Candidates)</code></pre>
                                <div>
                                    <div>
                                        <p> Determine the pointer alias checks to prove that there are no</p>
                                        <p> intervening stores.</p>
                                    </div>
                                </div>
                                <p>Defined at line 391 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="0A4383D5251DC4EF1D0C26596B1798EB63B9F42B">
                                <pre><code class="language-cpp code-clang-doc">void propagateStoredValueToLoadUsers (const StoreToLoadForwardingCandidate &amp; Cand, SCEVExpander &amp; SEE)</code></pre>
                                <div>
                                    <div>
                                        <p> Perform the transformation for a candidate.</p>
                                    </div>
                                </div>
                                <p>Defined at line 423 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="02052F4BDE2A53A6A9BCB8ED60DDB9FBA910D87D">
                                <pre><code class="language-cpp code-clang-doc">bool processLoop ()</code></pre>
                                <div>
                                    <div>
                                        <p> Top-level driver for each loop: find store-&gt;load forwarding</p>
                                        <p> candidates, add run-time checks and perform transformation.</p>
                                    </div>
                                </div>
                                <p>Defined at line 488 of file llvm/lib/Transforms/Scalar/LoopLoadElimination.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>JoinVals</title>
        <link rel="stylesheet" type="text/css" href="../clang-doc-mustache.css"/>
        <script src="../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="../GlobalNamespace/index.html">Global Namespace</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="./index.html">@nonymous_namespace</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>class JoinVals</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#B97E5667B2A9DC1B3ED1418069EAF0FDBF05EE87">JoinVals</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#91B5FDA74DA012193D92B2D7A0EC1EA897328C90">getAssignments</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#D58DCBEBF800492AFAC8C2EB07E3D9C838F2E508">getResolution</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#943B9670E81264696996C567DB7A3CCB566414B2">mapValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#9A06035818CD827582C6F32DEB46A05F00378E0B">resolveConflicts</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#C46663E2C175443A717968A96DBEA724B5933EE8">pruneValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#2B89C1285131D33FE2B1DA23306D70A3B8F3B7DC">pruneSubRegValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#5EE164E3F3AB210747CA3FA37D08A6AAB5B36F50">pruneMainSegments</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#368A34B7BDBD2342580B643512A23F9F38B6B3FB">eraseInstrs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#CE6B0677703DA92025A657E0DA255EB64E6CEC9E">removeImplicitDefs</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#Enums">Enums</a>
                    </li>
                    <li>
                        <ul>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">class JoinVals</h1>
                        <p>Defined at line 2499 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                        <div class="hero__subtitle">
                            <div>
                                <p> Track information about values in a single virtual register about to be</p>
                                <p> joined. Objects of this class are always created in pairs - one for each</p>
                                <p> side of the CoalescerPair (or one for each lane of a side of the coalescer</p>
                                <p> pair)</p>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="B97E5667B2A9DC1B3ED1418069EAF0FDBF05EE87">
                                <pre><code class="language-cpp code-clang-doc">void JoinVals (LiveRange &amp; LR, Register Reg, unsigned int SubIdx, LaneBitmask LaneMask, SmallVectorImpl&lt;VNInfo *&gt; &amp; newVNInfo, const CoalescerPair &amp; cp, LiveIntervals * lis, const TargetRegisterInfo * TRI, bool SubRangeJoin, bool TrackSubRegLiveness)</code></pre>
                                <p>Defined at line 2684 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="91B5FDA74DA012193D92B2D7A0EC1EA897328C90">
                                <pre><code class="language-cpp code-clang-doc">const int * getAssignments ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the value assignments suitable for passing to LiveInterval::join.</p>
                                    </div>
                                </div>
                                <p>Defined at line 2734 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="D58DCBEBF800492AFAC8C2EB07E3D9C838F2E508">
                                <pre><code class="language-cpp code-clang-doc">ConflictResolution getResolution (unsigned int Num)</code></pre>
                                <div>
                                    <div>
                                        <p> Get the conflict resolution for a value number.</p>
                                    </div>
                                </div>
                                <p>Defined at line 2737 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="943B9670E81264696996C567DB7A3CCB566414B2">
                                <pre><code class="language-cpp code-clang-doc">bool mapValues (JoinVals &amp; Other)</code></pre>
                                <div>
                                    <div>
                                        <p> Analyze defs in LR and compute a value mapping in NewVNInfo.</p>
                                        <p> Returns false if any conflicts were impossible to resolve.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3152 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="9A06035818CD827582C6F32DEB46A05F00378E0B">
                                <pre><code class="language-cpp code-clang-doc">bool resolveConflicts (JoinVals &amp; Other)</code></pre>
                                <div>
                                    <div>
                                        <p> Try to resolve conflicts that require all values to be mapped.</p>
                                        <p> Returns false if any conflicts were impossible to resolve.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3220 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="C46663E2C175443A717968A96DBEA724B5933EE8">
                                <pre><code class="language-cpp code-clang-doc">void pruneValues (JoinVals &amp; Other, SmallVectorImpl&lt;SlotIndex&gt; &amp; EndPoints, bool changeInstrs)</code></pre>
                                <div>
                                    <div>
                                        <p> Prune the live range of values in Other.LR where they would conflict with</p>
                                        <p> CR_Replace values in LR. Collect end points for restoring the live range</p>
                                        <p> after joining.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3303 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="2B89C1285131D33FE2B1DA23306D70A3B8F3B7DC">
                                <pre><code class="language-cpp code-clang-doc">void pruneSubRegValues (LiveInterval &amp; LI, LaneBitmask &amp; ShrinkMask)</code></pre>
                                <div>
                                    <div>
                                        <p> Consider the following situation when coalescing the copy between</p>
                                        <p> %31 and %45 at 800. (The vertical lines represent live range segments.)</p>
                                    </div>
                                    <div>
                                        <p>                              Main range         Subrange 0004 (sub2)</p>
                                        <p>                              %31    %45           %31    %45</p>
                                        <p>  544    %45 = COPY %28               +                    +</p>
                                        <p>                                      | v1                 | v1</p>
                                        <p>  560B bb.1:                          +                    +</p>
                                        <p>  624        = %45.sub2               | v2                 | v2</p>
                                        <p>  800    %31 = COPY %45        +      +             +      +</p>
                                        <p>                               | v0                 | v0</p>
                                        <p>  816    %31.sub1 = ...        +                    |</p>
                                        <p>  880    %30 = COPY %31        | v1                 +</p>
                                        <p>  928    %45 = COPY %30        |      +                    +</p>
                                        <p>                               |      | v0                 | v0  </p>
                                        <p>&lt;</p>
                                        <p>--+</p>
                                        <p>  992B   ; backedge -&gt; bb.1    |      +                    +        |</p>
                                        <p> 1040        = %31.sub0        +                                    |</p>
                                        <p>                                                 This value must remain</p>
                                        <p>                                                 live-out!</p>
                                    </div>
                                    <div>
                                        <p> Assuming that %31 is coalesced into %45, the copy at 928 becomes</p>
                                        <p> redundant, since it copies the value from %45 back into it. The</p>
                                        <p> conflict resolution for the main range determines that %45.v0 is</p>
                                        <p> to be erased, which is ok since %31.v1 is identical to it.</p>
                                        <p> The problem happens with the subrange for sub2: it has to be live</p>
                                        <p> on exit from the block, but since 928 was actually a point of</p>
                                        <p> definition of %45.sub2, %45.sub2 was not live immediately prior</p>
                                        <p> to that definition. As a result, when 928 was erased, the value v0</p>
                                        <p> for %45.sub2 was pruned in pruneSubRegValues. Consequently, an</p>
                                        <p> IMPLICIT_DEF was inserted as a &quot;backedge&quot; definition for %45.sub2,</p>
                                        <p> providing an incorrect value to the use at 624.</p>
                                    </div>
                                    <div>
                                        <p> Since the main-range values %31.v1 and %45.v0 were proved to be</p>
                                        <p> identical, the corresponding values in subranges must also be the</p>
                                        <p> same. A redundant copy is removed because it&#39;s not needed, and not</p>
                                        <p> because it copied an undefined value, so any liveness that originated</p>
                                        <p> from that copy cannot disappear. When pruning a value that started</p>
                                        <p> at the removed copy, the corresponding identical value must be</p>
                                        <p> extended to replace it.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3409 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="5EE164E3F3AB210747CA3FA37D08A6AAB5B36F50">
                                <pre><code class="language-cpp code-clang-doc">void pruneMainSegments (LiveInterval &amp; LI, bool &amp; ShrinkMainRange)</code></pre>
                                <div>
                                    <div>
                                        <p> Pruning values in subranges can lead to removing segments in these</p>
                                        <p> subranges started by IMPLICIT_DEFs. The corresponding segments in</p>
                                        <p> the main range also need to be removed. This function will mark</p>
                                        <p> the corresponding values in the main range as pruned, so that</p>
                                        <p> eraseInstrs can do the final cleanup.</p>
                                        <p> The parameter </p>
                                        <p> must be the interval whose main range is the</p>
                                        <p> live range LR.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3488 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="368A34B7BDBD2342580B643512A23F9F38B6B3FB">
                                <pre><code class="language-cpp code-clang-doc">void eraseInstrs (SmallPtrSetImpl&lt;MachineInstr *&gt; &amp; ErasedInstrs, SmallVectorImpl&lt;Register&gt; &amp; ShrinkRegs, LiveInterval * LI)</code></pre>
                                <div>
                                    <div>
                                        <p> Erase any machine instructions that have been coalesced away.</p>
                                        <p> Add erased instructions to ErasedInstrs.</p>
                                        <p> Add foreign virtual registers to ShrinkRegs if their live range ended at</p>
                                        <p> the erased instrs.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3514 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="CE6B0677703DA92025A657E0DA255EB64E6CEC9E">
                                <pre><code class="language-cpp code-clang-doc">void removeImplicitDefs ()</code></pre>
                                <div>
                                    <div>
                                        <p> Remove liverange defs at places where implicit defs will be removed.</p>
                                    </div>
                                </div>
                                <p>Defined at line 3502 of file llvm/lib/CodeGen/RegisterCoalescer.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="Enums" class="section-container">
                    <h2>Enumerations</h2>
                    <div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>

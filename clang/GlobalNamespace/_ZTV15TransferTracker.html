<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>TransferTracker</title>
        <link rel="stylesheet" type="text/css" href="../clang-doc-mustache.css"/>
        <script src="../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="./index.html">Global Namespace</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>class TransferTracker</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMembers">Public Members</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#TII">TII</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#TLI">TLI</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#MTracker">MTracker</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#MF">MF</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#DVMap">DVMap</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#ShouldEmitDebugEntryValues">ShouldEmitDebugEntryValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#Transfers">Transfers</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#VarLocs">VarLocs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#ActiveMLocs">ActiveMLocs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#ActiveVLocs">ActiveVLocs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#PendingDbgValues">PendingDbgValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#UseBeforeDefs">UseBeforeDefs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#UseBeforeDefVariables">UseBeforeDefVariables</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#TRI">TRI</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#CalleeSavedRegs">CalleeSavedRegs</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#A9D244D2824128571EEAE851C7D0898432422E70">TransferTracker</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#BC0390997BED17ED2DAE5008B35A75A797AEB475">isCalleeSaved</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#8E7C5F86EBF801DB97128124BCD4EADB5CD2DE94">ValueToLocSort</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#7948E6D7CEC9E717174CFD0D761FA6FAAC5D4D14">getLocQualityIfBetter</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#80655D70CD8CB7B440A568677856746DECFAAFC4">loadVarInloc</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#69ECEFA537E70A0D41C955B99DD5984EF8472272">loadInlocs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#B792123A47B0F3AAA877A17D6CB472C69550A8F6">addUseBeforeDef</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#FEAD6DDDA677F6B5BD7901907A203E68869798E8">checkInstForNewValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#F4A29618B79098485A3E22F9BF9DEA7910B41F41">flushDbgValues</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#A184E79CE7586936F1E32CE779F30D2612C62C30">isEntryValueVariable</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#A93274D89A1D7412A5448FF7064FBC6F15949F74">isEntryValueValue</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#2F081148C413F3D8A3B925832B58CF0E6B2E94A6">recoverAsEntryValue</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#B4E1711C21F0F390318FDFDB9DAEC522BBC1D992">redefVar</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#9A8887EE1EC4BE00AD66850DDAAA9FFBC9922D3D">redefVar</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#9A6292E11DFC7F065FC783A03E796BFD07EDC1E0">clobberMloc</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#D270830A83D6D51E5CBCEA7FCAB44E8E57731997">clobberMloc</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#E43D029536793F70DBEFC5BB5FB06B8D878A76B3">transferMlocs</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#4E7DFAB24B86F1828D41FFAF98A178A154C865DC">emitMOLoc</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#Enums">Enums</a>
                    </li>
                    <li>
                        <ul>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">class TransferTracker</h1>
                        <p>Defined at line 176 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                        <div class="hero__subtitle">
                            <div>
                                <p> Tracker for converting machine value locations and variable values into</p>
                                <p> variable locations (the output of LiveDebugValues), recorded as DBG_VALUEs</p>
                                <p> specifying block live-in locations and transfers within blocks.</p>
                            </div>
                            <div>
                                <p> Operating on a per-block basis, this class takes a (pre-loaded) MLocTracker</p>
                                <p> and must be initialized with the set of variable values that are live-in to</p>
                                <p> the block. The caller then repeatedly calls process(). TransferTracker picks</p>
                                <p> out variable locations for the live-in variable values (if there _is_ a</p>
                                <p> location) and creates the corresponding DBG_VALUEs. Then, as the block is</p>
                                <p> stepped through, transfers of values between machine locations are</p>
                                <p> identified and if profitable, a DBG_VALUE created.</p>
                            </div>
                            <div>
                                <p> This is where debug use-before-defs would be resolved: a variable with an</p>
                                <p> unavailable value could materialize in the middle of a block, when the</p>
                                <p> value becomes available. Or, we could detect clobbers and re-specify the</p>
                                <p> variable in a backup location. (XXX these are unimplemented).</p>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="PublicMembers" class="section-container">
                    <h2>Public Members</h2>
                    <div>
                        <div id="TII" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >const TargetInstrInfo * TII</code></pre>
                        </div>
                        <div id="TLI" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >const TargetLowering * TLI</code></pre>
                        </div>
                        <div id="MTracker" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >MLocTracker * MTracker</code></pre>
                        </div>
                        <div id="MF" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >MachineFunction &amp; MF</code></pre>
                        </div>
                        <div id="DVMap" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >const DebugVariableMap &amp; DVMap</code></pre>
                        </div>
                        <div id="ShouldEmitDebugEntryValues" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >bool ShouldEmitDebugEntryValues</code></pre>
                        </div>
                        <div id="Transfers" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >SmallVector&lt;Transfer, 32&gt; Transfers</code></pre>
                        </div>
                        <div id="VarLocs" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >SmallVector&lt;ValueIDNum, 32&gt; VarLocs</code></pre>
                        </div>
                        <div id="ActiveMLocs" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >int ActiveMLocs</code></pre>
                        </div>
                        <div id="ActiveVLocs" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >int ActiveVLocs</code></pre>
                        </div>
                        <div id="PendingDbgValues" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >SmallVector&lt;std::pair&lt;DebugVariableID, MachineInstr *&gt;, 4&gt; PendingDbgValues</code></pre>
                        </div>
                        <div id="UseBeforeDefs" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >int UseBeforeDefs</code></pre>
                        </div>
                        <div id="UseBeforeDefVariables" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >int UseBeforeDefVariables</code></pre>
                        </div>
                        <div id="TRI" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >const TargetRegisterInfo &amp; TRI</code></pre>
                        </div>
                        <div id="CalleeSavedRegs" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >const BitVector &amp; CalleeSavedRegs</code></pre>
                        </div>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="A9D244D2824128571EEAE851C7D0898432422E70">
                                <pre><code class="language-cpp code-clang-doc">void TransferTracker (const TargetInstrInfo * TII, MLocTracker * MTracker, MachineFunction &amp; MF, const DebugVariableMap &amp; DVMap, const TargetRegisterInfo &amp; TRI, const BitVector &amp; CalleeSavedRegs, bool ShouldEmitDebugEntryValues)</code></pre>
                                <p>Defined at line 269 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="BC0390997BED17ED2DAE5008B35A75A797AEB475">
                                <pre><code class="language-cpp code-clang-doc">bool isCalleeSaved (LocIdx L)</code></pre>
                                <p>Defined at line 280 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="8E7C5F86EBF801DB97128124BCD4EADB5CD2DE94">
                                <pre><code class="language-cpp code-clang-doc">bool ValueToLocSort (const ValueLocPair &amp; A, const ValueLocPair &amp; B)</code></pre>
                                <p>Defined at line 323 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="7948E6D7CEC9E717174CFD0D761FA6FAAC5D4D14">
                                <pre><code class="language-cpp code-clang-doc">std::optional&lt;LocationQuality&gt; getLocQualityIfBetter (LocIdx L, LocationQuality Min)</code></pre>
                                <div>
                                    <div>
                                        <p> Returns the LocationQuality for the location L iff the quality of L is</p>
                                        <p> is strictly greater than the provided minimum quality.</p>
                                    </div>
                                </div>
                                <p>Defined at line 330 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="80655D70CD8CB7B440A568677856746DECFAAFC4">
                                <pre><code class="language-cpp code-clang-doc">void loadVarInloc (MachineBasicBlock &amp; MBB, DbgOpIDMap &amp; DbgOpStore, const SmallVectorImpl&lt;ValueLocPair&gt; &amp; ValueToLoc, DebugVariableID VarID, DbgValue Value)</code></pre>
                                <div>
                                    <div>
                                        <p> For a variable </p>
                                        <p> with the live-in value </p>
                                        <p> attempts to resolve</p>
                                        <p> the DbgValue to a concrete DBG_VALUE, emitting that value and loading the</p>
                                        <p> tracking information to track Var throughout the block.</p>
                                        <p> is a map containing the best known location for every</p>
                                        <p>    ValueIDNum that Value may use.</p>
                                        <p> is the basic block that we are loading the live-in value for.</p>
                                        <p> is the map containing the DbgOpID-&gt;DbgOp mapping needed to</p>
                                        <p>    determine the values used by Value.</p>
                                    </div>
                                </div>
                                <p>Defined at line 355 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="69ECEFA537E70A0D41C955B99DD5984EF8472272">
                                <pre><code class="language-cpp code-clang-doc">void loadInlocs (MachineBasicBlock &amp; MBB, ValueTable &amp; MLocs, DbgOpIDMap &amp; DbgOpStore, const SmallVectorImpl&lt;std::pair&lt;DebugVariableID, DbgValue&gt;&gt; &amp; VLocs, unsigned int NumLocs)</code></pre>
                                <div>
                                    <div>
                                        <p> Load object with live-in variable values. </p>
                                        <p> contains the live-in</p>
                                        <p> values in each machine location, while </p>
                                        <p> the live-in variable</p>
                                        <p> values. This method picks variable locations for the live-in variables,</p>
                                        <p> creates DBG_VALUEs and puts them in #Transfers, then prepares the other</p>
                                        <p> object fields to track variable locations as we step through the block.</p>
                                        <p> FIXME: could just examine mloctracker instead of passing in </p>
                                    </div>
                                </div>
                                <p>Defined at line 458 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="B792123A47B0F3AAA877A17D6CB472C69550A8F6">
                                <pre><code class="language-cpp code-clang-doc">void addUseBeforeDef (DebugVariableID VarID, const DbgValueProperties &amp; Properties, const SmallVectorImpl&lt;DbgOp&gt; &amp; DbgOps, unsigned int Inst)</code></pre>
                                <div>
                                    <div>
                                        <p> Record that </p>
                                        <p> has value </p>
                                        <p> a value that becomes available</p>
                                        <p> later in the function.</p>
                                    </div>
                                </div>
                                <p>Defined at line 520 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="FEAD6DDDA677F6B5BD7901907A203E68869798E8">
                                <pre><code class="language-cpp code-clang-doc">void checkInstForNewValues (unsigned int Inst, int pos)</code></pre>
                                <div>
                                    <div>
                                        <p> After the instruction at index </p>
                                        <p> and position </p>
                                        <p> has been</p>
                                        <p> processed, check whether it defines a variable value in a use-before-def.</p>
                                        <p> If so, and the variable value hasn&#39;t changed since the start of the</p>
                                        <p> block, create a DBG_VALUE.</p>
                                    </div>
                                </div>
                                <p>Defined at line 531 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="F4A29618B79098485A3E22F9BF9DEA7910B41F41">
                                <pre><code class="language-cpp code-clang-doc">void flushDbgValues (int Pos, MachineBasicBlock * MBB)</code></pre>
                                <div>
                                    <div>
                                        <p> Helper to move created DBG_VALUEs into Transfers collection.</p>
                                    </div>
                                </div>
                                <p>Defined at line 613 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="A184E79CE7586936F1E32CE779F30D2612C62C30">
                                <pre><code class="language-cpp code-clang-doc">bool isEntryValueVariable (const DebugVariable &amp; Var, const DIExpression * Expr)</code></pre>
                                <p>Defined at line 628 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="A93274D89A1D7412A5448FF7064FBC6F15949F74">
                                <pre><code class="language-cpp code-clang-doc">bool isEntryValueValue (const ValueIDNum &amp; Val)</code></pre>
                                <p>Defined at line 642 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="2F081148C413F3D8A3B925832B58CF0E6B2E94A6">
                                <pre><code class="language-cpp code-clang-doc">bool recoverAsEntryValue (DebugVariableID VarID, const DbgValueProperties &amp; Prop, const ValueIDNum &amp; Num)</code></pre>
                                <p>Defined at line 657 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="B4E1711C21F0F390318FDFDB9DAEC522BBC1D992">
                                <pre><code class="language-cpp code-clang-doc">void redefVar (const MachineInstr &amp; MI)</code></pre>
                                <div>
                                    <div>
                                        <p> Change a variable value after encountering a DBG_VALUE inside a block.</p>
                                    </div>
                                </div>
                                <p>Defined at line 709 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="9A8887EE1EC4BE00AD66850DDAAA9FFBC9922D3D">
                                <pre><code class="language-cpp code-clang-doc">void redefVar (const MachineInstr &amp; MI, const DbgValueProperties &amp; Properties, SmallVectorImpl&lt;ResolvedDbgOp&gt; &amp; NewLocs)</code></pre>
                                <div>
                                    <div>
                                        <p> Handle a change in variable location within a block. Terminate the</p>
                                        <p> variables current location, and record the value it now refers to, so</p>
                                        <p> that we can detect location transfers later on.</p>
                                    </div>
                                </div>
                                <p>Defined at line 748 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="9A6292E11DFC7F065FC783A03E796BFD07EDC1E0">
                                <pre><code class="language-cpp code-clang-doc">void clobberMloc (LocIdx MLoc, int Pos, bool MakeUndef)</code></pre>
                                <div>
                                    <div>
                                        <p> Account for a location </p>
                                        <p> being clobbered. Examine the variable</p>
                                        <p> locations that will be terminated: and try to recover them by using</p>
                                        <p> another location. Optionally, given </p>
                                        <p> emit a DBG_VALUE to</p>
                                        <p> explicitly terminate a location if it can&#39;t be recovered.</p>
                                    </div>
                                </div>
                                <p>Defined at line 818 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="D270830A83D6D51E5CBCEA7FCAB44E8E57731997">
                                <pre><code class="language-cpp code-clang-doc">void clobberMloc (LocIdx MLoc, ValueIDNum OldValue, int Pos, bool MakeUndef)</code></pre>
                                <div>
                                    <div>
                                        <p> Overload that takes an explicit value </p>
                                        <p> for when the value in</p>
                                        <p> has changed and the TransferTracker&#39;s locations have not been</p>
                                        <p> updated yet.</p>
                                    </div>
                                </div>
                                <p>Defined at line 831 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="E43D029536793F70DBEFC5BB5FB06B8D878A76B3">
                                <pre><code class="language-cpp code-clang-doc">void transferMlocs (LocIdx Src, LocIdx Dst, int Pos)</code></pre>
                                <div>
                                    <div>
                                        <p> Transfer variables based on </p>
                                        <p> to be based on </p>
                                        <p> This handles</p>
                                        <p> both register copies as well as spills and restores. Creates DBG_VALUEs</p>
                                        <p> describing the movement.</p>
                                    </div>
                                </div>
                                <p>Defined at line 927 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="4E7DFAB24B86F1828D41FFAF98A178A154C865DC">
                                <pre><code class="language-cpp code-clang-doc">MachineInstrBuilder emitMOLoc (const MachineOperand &amp; MO, const DebugVariable &amp; Var, const DbgValueProperties &amp; Properties)</code></pre>
                                <p>Defined at line 965 of file llvm/lib/CodeGen/LiveDebugValues/InstrRefBasedImpl.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="Enums" class="section-container">
                    <h2>Enumerations</h2>
                    <div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>

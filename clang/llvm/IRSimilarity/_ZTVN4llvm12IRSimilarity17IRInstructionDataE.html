<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>IRInstructionData</title>
        <link rel="stylesheet" type="text/css" href="../../clang-doc-mustache.css"/>
        <script src="../../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="../../GlobalNamespace/index.html">Global Namespace</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="../index.html">llvm</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="./index.html">IRSimilarity</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>struct IRInstructionData</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMembers">Public Members</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#Inst">Inst</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#OperVals">OperVals</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#Legal">Legal</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#RevisedPredicate">RevisedPredicate</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#CalleeName">CalleeName</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#RelativeBlockLocations">RelativeBlockLocations</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#IDL">IDL</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#32F7683F0FBEA2E359FD625636975AA7BAA916FE">IRInstructionData</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#443AA216D80D43131D64111C053A67A190A40A58">IRInstructionData</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#23EA4A798ECB2D1657A3A7AA5BF187FA7241B70C">initializeInstruction</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#B8CD5505CE177BF4D3A450F9768AACF875DE4011">getPredicate</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#B3BC824DA95A4678CB7E051F520FA5509DA2BB98">getCalleeName</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#F4A8D905F184A43ADB7E94DA2FBFC8277BFDBB64">predicateForConsistency</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#C09DC7223EFDA6B4441F5DF0C915026CA12B426F">setBranchSuccessors</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#1C04B9C26CECC456E126DD57CE53DF2189FA083F">setBranchSuccessors</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#AB1B4BD8B2ADFA1F343F04957C32AEC9E819F9B4">setCalleeName</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#AF35AF4535391B14A6F69F4F846C76C2F0235E36">setPHIPredecessors</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#BB919259B5AEC20384F2E85AFB5AAF96A265E6A3">setPHIPredecessors</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#11E1AB385139B3933148CE79419C9883C6CA694B">getBlockOperVals</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">struct IRInstructionData</h1>
                        <p>Defined at line 115 of file llvm/include/llvm/Analysis/IRSimilarityIdentifier.h</p>
                        <div class="hero__subtitle">
                            <div>
                                <p> This provides the utilities for hashing an Instruction to an unsigned</p>
                                <p> integer. Two IRInstructionDatas produce the same hash value when their</p>
                                <p> underlying Instructions perform the same operation (even if they don&#39;t have</p>
                                <p> the same input operands.)</p>
                                <p> As a more concrete example, consider the following:</p>
                            </div>
                            <div>
                                <p> Then the IRInstructionData wrappers for these Instructions may be hashed like</p>
                                <p> so:</p>
                            </div>
                            <div>
                                <p> This hashing scheme will be used to represent the program as a very long</p>
                                <p> string. This string can then be placed in a data structure which can be used</p>
                                <p> for similarity queries.</p>
                            </div>
                            <div>
                                <p> TODO: Handle types of Instructions which can be equal even with different</p>
                                <p> operands. (E.g. comparisons with swapped predicates.)</p>
                                <p> TODO: Handle CallInsts, which are only checked for function type</p>
                                <p> by </p>
                                <p> TODO: Handle GetElementPtrInsts, as some of the operands have to be the</p>
                                <p> exact same, and some do not.</p>
                            </div>
                            <h3>Code</h3> 
                            <div>
                                <pre class="code-block">
                                    <code>
                                         %add1 = add i32 %a, %b
                                         %add2 = add i32 %c, %d
                                         %add3 = add i64 %e, %f
                                    </code>
                                </pre>
                            </div>
                            <div>
                                <pre class="code-block">
                                    <code>
                                         ; These two adds have the same types and operand types, so they hash to the
                                         ; same number.
                                         %add1 = add i32 %a, %b ; Hash: 1
                                         %add2 = add i32 %c, %d ; Hash: 1
                                         ; This add produces an i64. This differentiates it from %add1 and %add2. So,
                                         ; it hashes to a different number.
                                         %add3 = add i64 %e, %f; Hash: 2
                                    </code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="PublicMembers" class="section-container">
                    <h2>Public Members</h2>
                    <div>
                        <div id="Inst" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >Instruction * Inst</code></pre>
                        </div>
                        <div id="OperVals" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >SmallVector OperVals</code></pre>
                        </div>
                        <div id="Legal" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >bool Legal</code></pre>
                        </div>
                        <div id="RevisedPredicate" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >optional RevisedPredicate</code></pre>
                        </div>
                        <div id="CalleeName" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >optional CalleeName</code></pre>
                        </div>
                        <div id="RelativeBlockLocations" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >SmallVector RelativeBlockLocations</code></pre>
                        </div>
                        <div id="IDL" class="delimiter-container">
                            <pre><code class="language-cpp code-clang-doc" >IRInstructionDataList * IDL</code></pre>
                        </div>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="32F7683F0FBEA2E359FD625636975AA7BAA916FE">
                                <pre><code class="language-cpp code-clang-doc">void IRInstructionData (Instruction &amp; I, bool Legality, IRInstructionDataList &amp; IDL)</code></pre>
                                <div>
                                    <div>
                                        <p> Gather the information that is difficult to gather for an Instruction, or</p>
                                        <p> is changed. i.e. the operands of an Instruction and the Types of those</p>
                                        <p> operands. This extra information allows for similarity matching to make</p>
                                        <p> assertions that allow for more flexibility when checking for whether an</p>
                                        <p> Instruction performs the same operation.</p>
                                    </div>
                                </div>
                                <p>Defined at line 49 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="443AA216D80D43131D64111C053A67A190A40A58">
                                <pre><code class="language-cpp code-clang-doc">void IRInstructionData (IRInstructionDataList &amp; IDL)</code></pre>
                                <p>Defined at line 84 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="23EA4A798ECB2D1657A3A7AA5BF187FA7241B70C">
                                <pre><code class="language-cpp code-clang-doc">void initializeInstruction ()</code></pre>
                                <div>
                                    <div>
                                        <p> Fills data stuctures for IRInstructionData when it is constructed from a</p>
                                        <p> reference or a pointer.</p>
                                    </div>
                                </div>
                                <p>Defined at line 55 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="B8CD5505CE177BF4D3A450F9768AACF875DE4011">
                                <pre><code class="language-cpp code-clang-doc">Predicate getPredicate ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the predicate that the compare instruction is using for hashing the</p>
                                        <p> instruction. the IRInstructionData must be wrapping a CmpInst.</p>
                                    </div>
                                </div>
                                <p>Defined at line 201 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="B3BC824DA95A4678CB7E051F520FA5509DA2BB98">
                                <pre><code class="language-cpp code-clang-doc">StringRef getCalleeName ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the callee name that the call instruction is using for hashing the</p>
                                        <p> instruction. The IRInstructionData must be wrapping a CallInst.</p>
                                    </div>
                                </div>
                                <p>Defined at line 211 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="F4A8D905F184A43ADB7E94DA2FBFC8277BFDBB64">
                                <pre><code class="language-cpp code-clang-doc">Predicate predicateForConsistency (CmpInst * CI)</code></pre>
                                <div>
                                    <div>
                                        <p> A function that swaps the predicates to their less than form if they are</p>
                                        <p> in a greater than form. Otherwise, the predicate is unchanged.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>CI</b>   - The comparison operation to find a consistent preidcate for.
                                    </div> 
                                    <h3>Returns</h3>
                                    <p> the consistent comparison predicate.</p>
                                </div>
                                <p>Defined at line 185 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="C09DC7223EFDA6B4441F5DF0C915026CA12B426F">
                                <pre><code class="language-cpp code-clang-doc">void setBranchSuccessors (DenseMap&lt;BasicBlock *, unsigned int&gt; &amp; BasicBlockToInteger)</code></pre>
                                <div>
                                    <div>
                                        <p> For an IRInstructionData containing a branch, finds the</p>
                                        <p> relative distances from the source basic block to the target by taking</p>
                                        <p> the difference of the number assigned to the current basic block and the</p>
                                        <p> target basic block of the branch.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>BasicBlockToInteger</b>   - The mapping of basic blocks to their location in the module.
                                    </div> 
                                </div>
                                <p>Defined at line 87 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="1C04B9C26CECC456E126DD57CE53DF2189FA083F">
                                <pre><code class="language-cpp code-clang-doc">void setBranchSuccessors (int &amp; BasicBlockToInteger)</code></pre>
                                <div>
                                    <div>
                                        <p> For an IRInstructionData containing a branch, finds the</p>
                                        <p> relative distances from the source basic block to the target by taking</p>
                                        <p> the difference of the number assigned to the current basic block and the</p>
                                        <p> target basic block of the branch.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>BasicBlockToInteger</b>   - The mapping of basic blocks to their location in the module.
                                    </div> 
                                </div>
                                <p>Defined at line  of file </p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="AB1B4BD8B2ADFA1F343F04957C32AEC9E819F9B4">
                                <pre><code class="language-cpp code-clang-doc">void setCalleeName (bool MatchByName)</code></pre>
                                <div>
                                    <div>
                                        <p> For an IRInstructionData containing a CallInst, set the function name</p>
                                        <p> appropriately.  This will be an empty string if it is an indirect call,</p>
                                        <p> or we are not matching by name of the called function.  It will be the</p>
                                        <p> name of the function if </p>
                                        <p> is true and it is not an indirect</p>
                                        <p> call.  We may decide not to match by name in order to expand the</p>
                                        <p> size of the regions we can match.  If a function name has the same type</p>
                                        <p> signature, but the different name, the region of code is still almost the</p>
                                        <p> same.  Since function names can be treated as constants, the name itself</p>
                                        <p> could be extrapolated away.  However, matching by name provides a</p>
                                        <p> specificity and more &quot;identical&quot; code than not matching by name.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>MatchByName</b>   - A flag to mark whether we are using the called function name as a differentiating parameter.
                                    </div> 
                                </div>
                                <p>Defined at line 131 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="AF35AF4535391B14A6F69F4F846C76C2F0235E36">
                                <pre><code class="language-cpp code-clang-doc">void setPHIPredecessors (DenseMap&lt;BasicBlock *, unsigned int&gt; &amp; BasicBlockToInteger)</code></pre>
                                <div>
                                    <div>
                                        <p> For an IRInstructionData containing a PHINode, finds the</p>
                                        <p> relative distances from the incoming basic block to the current block by</p>
                                        <p> taking the difference of the number assigned to the current basic block</p>
                                        <p> and the incoming basic block of the branch.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>BasicBlockToInteger</b>   - The mapping of basic blocks to their location in the module.
                                    </div> 
                                </div>
                                <p>Defined at line 158 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="BB919259B5AEC20384F2E85AFB5AAF96A265E6A3">
                                <pre><code class="language-cpp code-clang-doc">void setPHIPredecessors (int &amp; BasicBlockToInteger)</code></pre>
                                <div>
                                    <div>
                                        <p> For an IRInstructionData containing a PHINode, finds the</p>
                                        <p> relative distances from the incoming basic block to the current block by</p>
                                        <p> taking the difference of the number assigned to the current basic block</p>
                                        <p> and the incoming basic block of the branch.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>BasicBlockToInteger</b>   - The mapping of basic blocks to their location in the module.
                                    </div> 
                                </div>
                                <p>Defined at line  of file </p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="11E1AB385139B3933148CE79419C9883C6CA694B">
                                <pre><code class="language-cpp code-clang-doc">ArrayRef getBlockOperVals ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the BasicBlock based operands for PHINodes and BranchInsts.</p>
                                    </div>
                                </div>
                                <p>Defined at line 112 of file llvm/lib/Analysis/IRSimilarityIdentifier.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>MSFBuilder</title>
        <link rel="stylesheet" type="text/css" href="../../clang-doc-mustache.css"/>
        <script src="../../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="../../GlobalNamespace/index.html">Global Namespace</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="../index.html">llvm</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="./index.html">msf</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>class MSFBuilder</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#A8CC78FA5CFFE2A5729067EF42B027182767829A">create</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#42FBA36187ABAFC6D827BF3666071525C745DCFB">setBlockMapAddr</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#91C63CBAB4FC27C3DB55E0980210F420C765AB00">setDirectoryBlocksHint</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#CE3002437E3020B74FA3F8458C29485381E99AF8">setFreePageMap</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#CD9E8E8FCFEFFB457A84E3C5D34471E3C7318213">setUnknown1</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#1FD5BF2A53D69FEC73CCAA5E684C919CE40C861E">getAllocator</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#9427E35D5413063266857ACB4EB30E877D150621">addStream</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#232F2F061FE593AB211B029A5B532D9681C66B02">addStream</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#34922B3E0BA4CEF32E3577985361282D0B56FB3C">setStreamSize</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#4D0893F771858D1EE7AC69964D4DE19C83636D66">getNumStreams</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#278539952659D6724C3DFF99250E8083826E7279">getStreamSize</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#C079BEBF02A82A562537B5E15563AF945C964610">getStreamBlocks</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#120C9BD4E3C8B36018F32F1C343608AE0D173672">getNumUsedBlocks</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#F25B26F42C8D1DBEF3F34B51D62960879AC3C39B">getNumFreeBlocks</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#2315FFBD5E023127FABDBB80AE6936681509EA25">getTotalBlockCount</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#02DC14D4C95E051AD16639DFA5C23B1952B7EEEB">isBlockFree</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#FE93A11CD841411BA8781AB3382D31B2E9ECE520">generateLayout</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#0666297E287654833BB1E72E5E09B9B659F1A92D">commit</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">class MSFBuilder</h1>
                        <p>Defined at line 28 of file llvm/include/llvm/DebugInfo/MSF/MSFBuilder.h</p>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="A8CC78FA5CFFE2A5729067EF42B027182767829A">
                                <pre><code class="language-cpp code-clang-doc">Expected&lt;MSFBuilder&gt; create (BumpPtrAllocator &amp; Allocator, uint32_t BlockSize, uint32_t MinBlockCount, bool CanGrow)</code></pre>
                                <div>
                                    <div>
                                        <p> Create a new `MSFBuilder`.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>BlockSize</b>   The internal block size used by the PDB file.  See isValidBlockSize() for a list of valid block sizes.
                                    </div> 
                                    <div>
                                        <b>MinBlockCount</b>   Causes the builder to reserve up front space for at least `MinBlockCount` blocks.  This is useful when using `MSFBuilder` to read an existing MSF that you want to write back out later.  The original MSF file&#39;s SuperBlock contains the exact number of blocks used by the file, so is a good hint as to how many blocks the new MSF file will contain.  Furthermore, it is actually necessary in this case.  To preserve stability of the file&#39;s layout, it is helpful to try to keep all streams mapped to their original block numbers.  To ensure that this is possible, space for all blocks must be allocated beforehand so that streams can be assigned to them.
                                    </div> 
                                    <div>
                                        <b>CanGrow</b>   If true, any operation which results in an attempt to locate a free block when all available blocks have been exhausted will allocate a new block, thereby growing the size of the final MSF file. When false, any such attempt will result in an error.  This is especially useful in testing scenarios when you know your test isn&#39;t going to do anything to increase the size of the file, so having an Error returned if it were to happen would catch a programming error
                                    </div> 
                                </div>
                                <p>Defined at line 50 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="42FBA36187ABAFC6D827BF3666071525C745DCFB">
                                <pre><code class="language-cpp code-clang-doc">Error setBlockMapAddr (uint32_t Addr)</code></pre>
                                <div>
                                    <div>
                                        <p> Request the block map to be at a specific block address.  This is useful</p>
                                        <p> when editing a MSF and you want the layout to be as stable as possible.</p>
                                    </div>
                                </div>
                                <p>Defined at line 62 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="91C63CBAB4FC27C3DB55E0980210F420C765AB00">
                                <pre><code class="language-cpp code-clang-doc">Error setDirectoryBlocksHint (ArrayRef DirBlocks)</code></pre>
                                <p>Defined at line 87 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="CE3002437E3020B74FA3F8458C29485381E99AF8">
                                <pre><code class="language-cpp code-clang-doc">void setFreePageMap (uint32_t Fpm)</code></pre>
                                <p>Defined at line 83 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="CD9E8E8FCFEFFB457A84E3C5D34471E3C7318213">
                                <pre><code class="language-cpp code-clang-doc">void setUnknown1 (uint32_t Unk1)</code></pre>
                                <p>Defined at line 85 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="1FD5BF2A53D69FEC73CCAA5E684C919CE40C861E">
                                <pre><code class="language-cpp code-clang-doc">BumpPtrAllocator &amp; getAllocator ()</code></pre>
                                <p>Defined at line 122 of file llvm/include/llvm/DebugInfo/MSF/MSFBuilder.h</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="9427E35D5413063266857ACB4EB30E877D150621">
                                <pre><code class="language-cpp code-clang-doc">Expected addStream (uint32_t Size, ArrayRef Blocks)</code></pre>
                                <div>
                                    <div>
                                        <p> Add a stream to the MSF file with the given size, occupying the given</p>
                                        <p> list of blocks.  This is useful when reading a MSF file and you want a</p>
                                        <p> particular stream to occupy the original set of blocks.  If the given</p>
                                        <p> blocks are already allocated, or if the number of blocks specified is</p>
                                        <p> incorrect for the given stream size, this function will return an Error.</p>
                                    </div>
                                </div>
                                <p>Defined at line 155 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="232F2F061FE593AB211B029A5B532D9681C66B02">
                                <pre><code class="language-cpp code-clang-doc">Expected addStream (uint32_t Size)</code></pre>
                                <div>
                                    <div>
                                        <p> Add a stream to the MSF file with the given size, occupying any available</p>
                                        <p> blocks that the builder decides to use.  This is useful when building a</p>
                                        <p> new PDB file from scratch and you don&#39;t care what blocks a stream occupies</p>
                                        <p> but you just want it to work.</p>
                                    </div>
                                </div>
                                <p>Defined at line 182 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="34922B3E0BA4CEF32E3577985361282D0B56FB3C">
                                <pre><code class="language-cpp code-clang-doc">Error setStreamSize (uint32_t Idx, uint32_t Size)</code></pre>
                                <div>
                                    <div>
                                        <p> Update the size of an existing stream.  This will allocate or deallocate</p>
                                        <p> blocks as needed to match the requested size.  This can fail if `CanGrow`</p>
                                        <p> was set to false when initializing the `MSFBuilder`.</p>
                                    </div>
                                </div>
                                <p>Defined at line 192 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="4D0893F771858D1EE7AC69964D4DE19C83636D66">
                                <pre><code class="language-cpp code-clang-doc">uint32_t getNumStreams ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the total number of streams in the MSF layout.  This should return 1</p>
                                        <p> for every call to `addStream`.</p>
                                    </div>
                                </div>
                                <p>Defined at line 224 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="278539952659D6724C3DFF99250E8083826E7279">
                                <pre><code class="language-cpp code-clang-doc">uint32_t getStreamSize (uint32_t StreamIdx)</code></pre>
                                <div>
                                    <div>
                                        <p> Get the size of a stream by index.</p>
                                    </div>
                                </div>
                                <p>Defined at line 226 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="C079BEBF02A82A562537B5E15563AF945C964610">
                                <pre><code class="language-cpp code-clang-doc">ArrayRef getStreamBlocks (uint32_t StreamIdx)</code></pre>
                                <div>
                                    <div>
                                        <p> Get the list of blocks allocated to a particular stream.</p>
                                    </div>
                                </div>
                                <p>Defined at line 230 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="120C9BD4E3C8B36018F32F1C343608AE0D173672">
                                <pre><code class="language-cpp code-clang-doc">uint32_t getNumUsedBlocks ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the total number of blocks that will be allocated to actual data in</p>
                                        <p> this MSF file.</p>
                                    </div>
                                </div>
                                <p>Defined at line 145 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="F25B26F42C8D1DBEF3F34B51D62960879AC3C39B">
                                <pre><code class="language-cpp code-clang-doc">uint32_t getNumFreeBlocks ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the total number of blocks that exist in the MSF file but are not</p>
                                        <p> allocated to any valid data.</p>
                                    </div>
                                </div>
                                <p>Defined at line 149 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="2315FFBD5E023127FABDBB80AE6936681509EA25">
                                <pre><code class="language-cpp code-clang-doc">uint32_t getTotalBlockCount ()</code></pre>
                                <div>
                                    <div>
                                        <p> Get the total number of blocks in the MSF file.  In practice this is equal</p>
                                        <p> to `getNumUsedBlocks() + getNumFreeBlocks()`.</p>
                                    </div>
                                </div>
                                <p>Defined at line 151 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="02DC14D4C95E051AD16639DFA5C23B1952B7EEEB">
                                <pre><code class="language-cpp code-clang-doc">bool isBlockFree (uint32_t Idx)</code></pre>
                                <div>
                                    <div>
                                        <p> Check whether a particular block is allocated or free.</p>
                                    </div>
                                </div>
                                <p>Defined at line 153 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="FE93A11CD841411BA8781AB3382D31B2E9ECE520">
                                <pre><code class="language-cpp code-clang-doc">Expected&lt;MSFLayout&gt; generateLayout ()</code></pre>
                                <div>
                                    <div>
                                        <p> Finalize the layout and build the headers and structures that describe the</p>
                                        <p> MSF layout and can be written directly to the MSF file.</p>
                                    </div>
                                </div>
                                <p>Defined at line 250 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="0666297E287654833BB1E72E5E09B9B659F1A92D">
                                <pre><code class="language-cpp code-clang-doc">Expected&lt;FileBufferByteStream&gt; commit (StringRef Path, MSFLayout &amp; Layout)</code></pre>
                                <div>
                                    <div>
                                        <p> Write the MSF layout to the underlying file.</p>
                                    </div>
                                </div>
                                <p>Defined at line 337 of file llvm/lib/DebugInfo/MSF/MSFBuilder.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>ShuffleInstructionBuilder</title>
        <link rel="stylesheet" type="text/css" href="../../../clang-doc-mustache.css"/>
        <script src="../../../mustache-index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
            <div class="navbar__logo">
                
            </div>
            <div class="navbar__menu">
                <ul class="navbar__links">
                    <li class="navbar__item">
                        <a href="../../../index.html" class="navbar__link">Home</a>
                    </li>
                </ul>
            </div>
            <div class="navbar-breadcrumb-container">
                <div class="navbar-breadcrumb-item"><a href="../../../GlobalNamespace/index.html">Global Namespace</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="../../index.html">llvm</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="../index.html">slpvectorizer</a></div>&rarr;
                <div class="navbar-breadcrumb-item"><a href="../_ZTVN4llvm13slpvectorizer7BoUpSLPE.html">BoUpSLP</a></div>
            </div>
        </div>
    </nav>
    <main>
        <div class="container">
            <div class="sidebar">
                <h2>class ShuffleInstructionBuilder</h2>
                <ul>
                    <li class="sidebar-section">
                        <a class="sidebar-item" href="#PublicMethods">Public Method</a>
                    </li>
                    <li>
                        <ul>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#33CEAE2C4FAD53D23CAE2B7E2C2FBD57AB3348BB">ShuffleInstructionBuilder</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#838AEF47E64AD85839C60D8D619F80D8F211F9E1">adjustExtracts</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#00C13638496D1EE82F57E2855F440D77899C3913">needToDelay</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#1DD362F73B79E9A89FAFE9ED6A04C8B83249A582">resetForSameNode</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#97DE052B3F376D1533D6969D7F7ABD7B29094815">add</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#0DF4789550F649714C698EA2E4CBCC8D2882E8CB">add</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#4F7E652ACE51367A6BFC8D2B99B4AF6A725A8BEC">add</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#FF2C49B6811DD41BBBFCBDA85CCCAB758EE144A4">add</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#7D2337B090391511B60F7828880B14969F35F8C7">addOrdered</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#BF6663B106BB8827F44C50777B4903C45D7B22E7">gather</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#998ADE9FCDF83F88B34BA772B1B6535157727932">createFreeze</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#639D2D8A4FE10B68B79996DE30F0F3B689AF0028">finalize</a>
                            </li>
                            <li class="sidebar-item-container">
                                <a class="sidebar-item" href="#7BB3AF4C9676430C5B44F10C4D0E45B28CCB13ED">~ShuffleInstructionBuilder</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="content">
                <section class="hero section-container">
                    <div class="hero__title">
                        <h1 class="hero__title-large">class ShuffleInstructionBuilder</h1>
                        <p>Defined at line 18136 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                        <div class="hero__subtitle">
                            <div>
                                <p> Merges shuffle masks and emits final shuffle instruction, if required. It</p>
                                <p> supports shuffling of 2 input vectors. It implements lazy shuffles emission,</p>
                                <p> when the actual shuffle instruction is generated only if this is actually</p>
                                <p> required. Otherwise, the shuffle instruction emission is delayed till the</p>
                                <p> end of the process, to reduce the number of emitted instructions and further</p>
                                <p> analysis/transformations.</p>
                                <p> The class also will look through the previously emitted shuffle instructions</p>
                                <p> and properly mark indices in mask as undef.</p>
                                <p> For example, given the code</p>
                            </div>
                            <div>
                                <p> and if need to emit shuffle of %s1 and %s2 with mask </p>
                                <p>&lt;</p>
                                <p>1, 0, 3, 2&gt;, it will</p>
                                <p> look through %s1 and %s2 and emit</p>
                            </div>
                            <div>
                                <p> instead.</p>
                                <p> If 2 operands are of different size, the smallest one will be resized and</p>
                                <p> the mask recalculated properly.</p>
                                <p> For example, given the code</p>
                            </div>
                            <div>
                                <p> and if need to emit shuffle of %s1 and %s2 with mask </p>
                                <p>&lt;</p>
                                <p>1, 0, 5, 4&gt;, it will</p>
                                <p> look through %s1 and %s2 and emit</p>
                            </div>
                            <div>
                                <p> instead.</p>
                            </div>
                            <h3>Code</h3> 
                            <div>
                                <pre class="code-block">
                                    <code>
                                         %s1 = shufflevector &lt;2 x ty&gt; %0, poison, &lt;1, 0&gt;
                                         %s2 = shufflevector &lt;2 x ty&gt; %1, poison, &lt;1, 0&gt;
                                    </code>
                                </pre>
                            </div>
                            <div>
                                <pre class="code-block">
                                    <code>
                                         %res = shufflevector &lt;2 x ty&gt; %0, %1, &lt;0, 1, 2, 3&gt;
                                    </code>
                                </pre>
                            </div>
                            <div>
                                <pre class="code-block">
                                    <code>
                                         %s1 = shufflevector &lt;2 x ty&gt; %0, poison, &lt;1, 0, 1, 0&gt;
                                         %s2 = shufflevector &lt;2 x ty&gt; %1, poison, &lt;1, 0, 1, 0&gt;
                                    </code>
                                </pre>
                            </div>
                            <div>
                                <pre class="code-block">
                                    <code>
                                         %res = shufflevector &lt;2 x ty&gt; %0, %1, &lt;0, 1, 2, 3&gt;
                                    </code>
                                </pre>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="PublicMethods" class="section-container">
                    <h2>Public Methods</h2>
                    <div>
                        <div class="delimiter-container">
                            <div id="33CEAE2C4FAD53D23CAE2B7E2C2FBD57AB3348BB">
                                <pre><code class="language-cpp code-clang-doc">void ShuffleInstructionBuilder (Type * ScalarTy, IRBuilderBase &amp; Builder, BoUpSLP &amp; R)</code></pre>
                                <p>Defined at line 18273 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="838AEF47E64AD85839C60D8D619F80D8F211F9E1">
                                <pre><code class="language-cpp code-clang-doc">Value * adjustExtracts (const TreeEntry * E, MutableArrayRef Mask, ArrayRef&lt;std::optional&lt;TTI::ShuffleKind&gt;&gt; ShuffleKinds, unsigned int NumParts, bool &amp; UseVecBaseAsInput)</code></pre>
                                <div>
                                    <div>
                                        <p> Adjusts extractelements after reusing them.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18277 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="00C13638496D1EE82F57E2855F440D77899C3913">
                                <pre><code class="language-cpp code-clang-doc">std::optional&lt;Value *&gt; needToDelay (const TreeEntry * E, int Deps)</code></pre>
                                <div>
                                    <div>
                                        <p> Checks if the specified entry </p>
                                        <p> needs to be delayed because of its</p>
                                        <p> dependency nodes.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18417 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="1DD362F73B79E9A89FAFE9ED6A04C8B83249A582">
                                <pre><code class="language-cpp code-clang-doc">void resetForSameNode ()</code></pre>
                                <div>
                                    <div>
                                        <p> Reset the builder to handle perfect diamond match.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18435 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="97DE052B3F376D1533D6969D7F7ABD7B29094815">
                                <pre><code class="language-cpp code-clang-doc">void add (const TreeEntry &amp; E1, const TreeEntry &amp; E2, ArrayRef Mask)</code></pre>
                                <div>
                                    <div>
                                        <p> Adds 2 input vectors (in form of tree entries) and the mask for their</p>
                                        <p> shuffling.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18442 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="0DF4789550F649714C698EA2E4CBCC8D2882E8CB">
                                <pre><code class="language-cpp code-clang-doc">void add (const TreeEntry &amp; E1, ArrayRef Mask)</code></pre>
                                <div>
                                    <div>
                                        <p> Adds single input vector (in form of tree entry) and the mask for its</p>
                                        <p> shuffling.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18449 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="4F7E652ACE51367A6BFC8D2B99B4AF6A725A8BEC">
                                <pre><code class="language-cpp code-clang-doc">void add (Value * V1, Value * V2, ArrayRef Mask)</code></pre>
                                <div>
                                    <div>
                                        <p> Adds 2 input vectors and the mask for their shuffling.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18454 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="FF2C49B6811DD41BBBFCBDA85CCCAB758EE144A4">
                                <pre><code class="language-cpp code-clang-doc">void add (Value * V1, ArrayRef Mask, bool )</code></pre>
                                <div>
                                    <div>
                                        <p> Adds another one input vector and the mask for the shuffling.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18488 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="7D2337B090391511B60F7828880B14969F35F8C7">
                                <pre><code class="language-cpp code-clang-doc">void addOrdered (Value * V1, ArrayRef Order)</code></pre>
                                <div>
                                    <div>
                                        <p> Adds another one input vector and the mask for the shuffling.</p>
                                    </div>
                                </div>
                                <p>Defined at line 18541 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="BF6663B106BB8827F44C50777B4903C45D7B22E7">
                                <pre><code class="language-cpp code-clang-doc">Value * gather (ArrayRef VL, unsigned int MaskVF, Value * Root)</code></pre>
                                <p>Defined at line 18546 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="998ADE9FCDF83F88B34BA772B1B6535157727932">
                                <pre><code class="language-cpp code-clang-doc">Value * createFreeze (Value * V)</code></pre>
                                <p>Defined at line 18553 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="639D2D8A4FE10B68B79996DE30F0F3B689AF0028">
                                <pre><code class="language-cpp code-clang-doc">Value * finalize (ArrayRef ExtMask, ArrayRef&lt;std::pair&lt;const TreeEntry *, unsigned int&gt;&gt; SubVectors, ArrayRef SubVectorsMask, unsigned int VF, function_ref&lt;void (Value *&amp;, SmallVectorImpl&lt;int&gt; &amp;, function_ref&lt;Value *(Value *, Value *, ArrayRef&lt;int&gt;)&gt;)&gt; Action)</code></pre>
                                <div>
                                    <div>
                                        <p> Finalize emission of the shuffles.</p>
                                    </div>
                                    <h3>Parameters</h3>
                                    <div>
                                        <b>Action</b>   the action (if any) to be performed before final applying of the  mask.
                                    </div> 
                                </div>
                                <p>Defined at line 18557 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                        <div class="delimiter-container">
                            <div id="7BB3AF4C9676430C5B44F10C4D0E45B28CCB13ED">
                                <pre><code class="language-cpp code-clang-doc">void ~ShuffleInstructionBuilder ()</code></pre>
                                <p>Defined at line 18662 of file llvm/lib/Transforms/Vectorize/SLPVectorizer.cpp</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</body>
</html>
